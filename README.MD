xzr# Install dependencies

npm install

# Migrate .eslintrc to eslint.config

npx @eslint/migrate-config .eslintrc.json

# Generate Prisma migrations

npx prisma migrate dev --name init

# Generate Prisma database without migrations

npx prisma db push

# generate client for prisma

npx prisma generate



# E-Commerce API

_Este proyecto es una API escalable y modular para un sistema de comercio electrÃ³nico, implementado con **Node.js, Express, Prisma y TypeScript**. Se diseÃ±Ã³ siguiendo los principios de **arquitectura hexagonal**, asegurando flexibilidad, mantenibilidad y separaciÃ³n de responsabilidades._

---

## ğŸš€ **TecnologÃ­as Utilizadas**
- **Node.js** (Back-end)
- **Express** (Framework)
- **TypeScript** (Tipado fuerte y mantenibilidad)
- **Prisma ORM** (Manejo eficiente de base de datos)
- **PostgreSQL** (Base de datos relacional)
- **JWT** (AutenticaciÃ³n segura)
- **Express Validator** (ValidaciÃ³n de datos)
- **Swagger** (DocumentaciÃ³n de API)
- **Winston Logger** (Registro estructurado de logs)
- **Arquitectura Hexagonal** (SeparaciÃ³n clara entre capas)

---

## ğŸ“‚ **Estructura del Proyecto**
La API estÃ¡ organizada en mÃ³dulos para facilitar la escalabilidad y el mantenimiento:

```
ğŸ’„ e-commerce-api
 â””ğŸ“‚ src
   â”œğŸ“‚ auth
   â”‚  â”œğŸ“‚ application (Casos de uso y validaciones)
   â”‚  â”œğŸ“‚ domain (Interfaces y lÃ³gica de negocio)
   â”‚  â”œğŸ“‚ infrastructure (Routers y controladores)
   â”œğŸ“‚ core
   â”‚  â”œğŸ“‚ infrastructure
   â”‚  â”‚  â”œğŸ“‚ errors (Manejo de errores personalizados)
   â”‚  â”‚  â”œğŸ“‚ security (JWT y autenticaciÃ³n)
   â”‚  â”‚  â”œğŸ“‚ logger (Sistema de logs con Winston)
   â”œğŸ“‚ orders (GestiÃ³n de pedidos)
   â”œğŸ“‚ products (GestiÃ³n de productos)
   â”œğŸ“‚ users (GestiÃ³n de usuarios)
   â”œğŸ“‚ database (Prisma ORM y migraciones)
   â””ğŸ“„ server.ts (ConfiguraciÃ³n del servidor)
 â”œğŸ“ prisma (Esquema de base de datos y migraciones)
 â”œğŸ“ .eslintrc.json (ConfiguraciÃ³n de ESLint)
 â”œğŸ“ package.json
 â”œğŸ“ README.md
```

---

## ğŸ’¡ **Arquitectura Hexagonal**
Este proyecto sigue los principios de **Arquitectura Hexagonal**, lo que permite la independencia de los frameworks y la reutilizaciÃ³n de la lÃ³gica de negocio en diferentes interfaces.

| **Capa**              | **Responsabilidad** |
|----------------------|----------------------|
| **Infraestructura**   | Routers, controladores y conexiÃ³n con Prisma |
| **AplicaciÃ³n**       | Casos de uso y validaciones de negocio |
| **Dominio**         | Entidades, interfaces y lÃ³gica pura de negocio |

Cada mÃ³dulo sigue esta estructura para garantizar escalabilidad y testabilidad.

---

## ğŸ› ï¸ **InstalaciÃ³n y ConfiguraciÃ³n**
Sigue estos pasos para configurar el proyecto en tu entorno:

### **1ï¸âƒ£ Clona el repositorio**
```sh
git clone https://github.com/tu_usuario/e-commerce-api.git
cd e-commerce-api
```

### **2ï¸âƒ£ Instala las dependencias**
```sh
npm install
```

### **3ï¸âƒ£ Configura las variables de entorno**
Crea un archivo `.env` en la raÃ­z del proyecto con las siguientes variables:

```
DATABASE_URL=postgresql://usuario:password@localhost:5432/e-commerce-db?schema=public
JWT_SECRET=tu_secreto_super_seguro
PORT=3000
```

### **4ï¸âƒ£ Generar base de datos**
```sh
npx prisma migrate dev --name init
```

### **5ï¸âƒ£ Generar cliente Prisma**
```sh
npx prisma generate
```

### **6ï¸âƒ£ Iniciar el servidor**
```sh
npm run dev
```
La API se ejecutarÃ¡ en:  
ğŸ“Œ `http://localhost:3000/`

---

## ğŸ’š **AutenticaciÃ³n y Seguridad**
El sistema utiliza **JWT (JSON Web Token)** para la autenticaciÃ³n.  
Se implementÃ³ un **middleware de autorizaciÃ³n** para proteger rutas sensibles.

Ejemplo de middleware de autenticaciÃ³n:
```typescript
import { Request, Response, NextFunction } from 'express';
import jwt from 'jsonwebtoken';

export function authenticateJWT(req: Request, res: Response, next: NextFunction) {
  const token = req.header('Authorization')?.split(' ')[1];
  if (!token) return res.status(401).json({ message: 'Unauthorized' });

  jwt.verify(token, process.env.JWT_SECRET!, (err, user) => {
    if (err) return res.status(403).json({ message: 'Forbidden' });
    req.user = user;
    next();
  });
}
```

---

## ğŸŒ **DocumentaciÃ³n Swagger**
La API estÃ¡ documentada con **Swagger**. Puedes acceder a la documentaciÃ³n en:

ğŸ“Œ `http://localhost:3000/docs`

---

## ğŸ” **Ejemplo de Uso**
### **Registro de Usuario**
```sh
curl -X POST http://localhost:3000/api/auth/register \
-H "Content-Type: application/json" \
-d '{
  "username": "testuser",
  "email": "test@example.com",
  "password": "123456"
}'
```

### **Obtener una Orden**
```sh
curl -X GET http://localhost:3000/api/order/123e4567-e89b-12d3-a456-426614174000 \
-H "Authorization: Bearer <your_token>"
```

---

## ğŸ“ **Licencia**
Este proyecto estÃ¡ bajo la **Licencia MIT**. Puedes modificarlo y distribuirlo libremente.

---

ğŸš€ **Listo! Ahora tienes un README completo y bien documentado con toda la estructura, escalabilidad y arquitectura del proyecto.**

